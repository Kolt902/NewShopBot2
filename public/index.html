<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esention</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Esention</h1>
      <div class="banner">–°–ö–ò–î–ö–ê 10% –ù–ê –í–°–Å –¢–û–í–ê–†–ò–©–´</div>
    </header>

    <nav class="categories">
      <button class="category-btn active" data-category="old-money">Old Money</button>
      <button class="category-btn" data-category="streetwear">Streetwear</button>
      <button class="category-btn" data-category="luxury">Luxury</button>
      <button class="category-btn" data-category="sport">Sport</button>
    </nav>

    <div class="filters">
      <select class="filter-select" id="seasonFilter">
        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∑–æ–Ω</option>
        <option value="spring">Spring</option>
        <option value="summer">Summer</option>
        <option value="autumn">Autumn</option>
        <option value="winter">Winter</option>
      </select>
    </div>

    <div class="catalog">
      <div class="product-card">
        <div class="product-header">
          <h3 class="product-title">–î–∂–∏–Ω—Å—ã Adidas</h3>
          <button class="favorite-btn">‚ù§Ô∏è</button>
        </div>
        <p class="product-price">5 999 ‚ÇΩ</p>
        <select class="size-select">
          <option value="" disabled selected>–†–∞–∑–º–µ—Ä</option>
          <option value="30">30</option>
          <option value="32">32</option>
          <option value="34">34</option>
        </select>
        <button class="add-to-cart" onclick="addToCart('–î–∂–∏–Ω—Å—ã Adidas', 5999, this)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>

      <div class="product-card">
        <div class="product-header">
          <h3 class="product-title">–§—É—Ç–±–æ–ª–∫–∞ Nike</h3>
          <button class="favorite-btn">‚ù§Ô∏è</button>
        </div>
        <p class="product-price">2 999 ‚ÇΩ</p>
        <select class="size-select">
          <option value="" disabled selected>–†–∞–∑–º–µ—Ä</option>
          <option value="S">S</option>
          <option value="M">M</option>
          <option value="L">L</option>
          <option value="XL">XL</option>
        </select>
        <button class="add-to-cart" onclick="addToCart('–§—É—Ç–±–æ–ª–∫–∞ Nike', 2999, this)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>

      <div class="product-card">
        <div class="product-header">
          <h3 class="product-title">–ö—Ä–æ—Å—Å–æ–≤–∫–∏ Puma</h3>
          <button class="favorite-btn">‚ù§Ô∏è</button>
        </div>
        <p class="product-price">8 999 ‚ÇΩ</p>
        <select class="size-select">
          <option value="" disabled selected>–†–∞–∑–º–µ—Ä</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
        </select>
        <button class="add-to-cart" onclick="addToCart('–ö—Ä–æ—Å—Å–æ–≤–∫–∏ Puma', 8999, this)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>
    </div>
  </div>

  <nav class="bottom-nav">
    <button class="nav-btn" onclick="handleNavClick('home')">
      <span class="nav-icon">üè†</span>
      <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
    </button>
    <button class="nav-btn" onclick="handleNavClick('cart')">
      <span class="nav-icon">üõí</span>
      <span class="nav-text">–ö–æ—Ä–∑–∏–Ω–∞</span>
    </button>
    <button class="nav-btn" onclick="handleNavClick('favorites')">
      <span class="nav-icon">‚ù§Ô∏è</span>
      <span class="nav-text">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
    </button>
    <button class="nav-btn" onclick="handleNavClick('profile')">
      <span class="nav-icon">üë§</span>
      <span class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
  </nav>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let cart = [];
    let favorites = new Set();
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    document.querySelectorAll('.category-btn').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        console.log('–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', button.dataset.category);
      });
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
    document.querySelectorAll('.favorite-btn').forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const card = button.closest('.product-card');
        const title = card.querySelector('.product-title').textContent;
        
        if (favorites.has(title)) {
          favorites.delete(title);
          button.style.opacity = '0.5';
        } else {
          favorites.add(title);
          button.style.opacity = '1';
        }
        
        console.log('–ò–∑–±—Ä–∞–Ω–Ω–æ–µ:', Array.from(favorites));
      });
    });

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
    function addToCart(name, price, button) {
      const card = button.closest('.product-card');
      const sizeSelect = card.querySelector('.size-select');
      
      if (sizeSelect.value === "") {
        tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä');
        return;
      }

      const item = {
        name,
        price,
        size: sizeSelect.value
      };

      cart.push(item);
      
      // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
      button.classList.add('added');
      button.textContent = '–î–æ–±–∞–≤–ª–µ–Ω–æ ‚úì';
      
      setTimeout(() => {
        button.classList.remove('added');
        button.textContent = '–í –∫–æ—Ä–∑–∏–Ω—É';
      }, 1500);

      tg.showAlert(`${name} (—Ä–∞–∑–º–µ—Ä ${sizeSelect.value}) –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É`);
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    function handleNavClick(section) {
      console.log('–ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª:', section);
      
      if (section === 'cart' && cart.length > 0) {
        const order = {
          items: cart,
          total: cart.reduce((sum, item) => sum + item.price, 0)
        };
        tg.sendData(JSON.stringify(order));
      } else if (section === 'cart') {
        tg.showAlert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
    tg.ready();
  </script>
</body>
</html>